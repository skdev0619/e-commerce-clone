# 요구사항
### 사용자
- 사용자는 아이디, 비밀번호, 핸드폰 번호를 가지고 있다.

### 잔액
- 잔액을 충전한다
- 특정 사용자의 잔액을 조회한다.
- 잔액을 충전 or 사용 시 이력을 쌓는다.

### 상품
- 상품은 상품명, 가격, 상품의 옵션(색깔), 옵션 별 잔여 수량을 조회한다
    - 상품의 옵션은 모자의 색깔만 선택 가능하도록 한다
    - 즉, 사용자는 제공된 색상 목록에서 하나 선택이 가능하다.

### 쿠폰
- 쿠폰은 쿠폰명, 할인타입(정액 or 정률), 할인 값(1000원 or 10%), 최대 할인 금액, 최소 금액 주문 제한, 잔여 수량, 쿠폰 만료일을 가지고 있다.
- 쿠폰은 발행 가능 기간이 존재한다.
    - 발행 가능 시간이 아니면 발급할 수 없다.
- 쿠폰은 선착순으로 사용자에게 발급되며, 정해진 수량이 소진되면 발급할 수 없다.
    - 쿠폰은 1인당 1회씩만 발급 가능하다.
- 사용자가 보유한 쿠폰 목록을 조회한다.

### 주문
- 사용자 id, 상품 id, 상품의 수량을 입력받아 주문 요청 후, 결제를 진행한다.
    - 상품의 재고가 없는 경우, 주문할 수 없다.
    - 주문 시에 유효한 할인 쿠폰을 함께 제출하면, 전체 주문금액에 대해 할인 혜택을 받는다.
- 주문 당 하나의 쿠폰만 적용 가능하다.

### 결제
- 결제는 주문이 성공적으로 완료된 이후에 진행된다.
- 결제는 기존 충전된 잔액을 차감하는 방식으로 수행한다.
    - 잔액이 0원이거나, 결제금액 > 잔액이 경우는 결제를 진행할 수 없다.
- 결제 성공 시, 주문별 결제 내역을 저장한다.
- 결제 성공 시, 실시간으로 주문 정보를 외부 데이터 플랫폼에 전송한다.

### 상위 상품 조회
- 최근 3일간 가장 많이 팔린 상위 5개 상품 정보를 조회한다.
    - 주문 완료 처리된 상품 기준으로 집계한다.
- 매일 오전 2시마다 가장 많이 팔린 상위 상품 정보를 집계 및 갱신한다
